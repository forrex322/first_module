import json
from abc import ABC
from datetime import datetime


class JSONSerializable:

    def json_serialize(self):
        return {'name': self.name, 'release_date': self.release_date, 'version': self.version}

    def to_json(self):
        return json.dumps(self, default=lambda o: o.json_serialize())


class Application(ABC, JSONSerializable):
    __slots__ = ('name', 'release_date', 'version',)

    def __init__(self, name, release_date, version):
        self.name = name
        self.release_date = release_date
        self.version = version

    def __str__(self):
        return f'Application: {self.name}'

    def __repr__(self):
        return f'Application: {self.name}, release date: {self.release_date}, version: {self.version}'


class AndroidApplication(Application, JSONSerializable):
    list_of_versions = [2.0, 2.1, 3.0]

    def get_absolute_url(self):
        return f'play.google.com/webstore/{self.name.replace(" ", "_")}'

    def __eq__(self, other):
        print(f'Compare by year and version\n{self.name} = {other.name}')
        self.release_date = datetime.strptime(self.release_date, "%Y-%m-%d")
        other.release_date = datetime.strptime(other.release_date, "%Y-%m-%d")
        return (self.release_date.year == other.release_date.year) & (self.version == other.version)

    def __gt__(self, other):
        print(f'Compare by year and version\n{self.name} > {other.name}')
        return (self.release_date.year > other.release_date.year) & (self.version > other.version)

    def __lt__(self, other):
        print(f'Compare by year and version\n{self.name} < {other.name}')
        return (self.release_date.year < other.release_date.year) & (self.version < other.version)

    @property
    def list_of_compatible_versions(self):
        print("Getter")
        return self.list_of_versions

    @list_of_compatible_versions.setter
    def list_of_compatible_versions(self, value):
        print("Setter")
        self.list_of_versions = value


class IOSApplication(Application):

    def get_absolute_url(self):
        return f'apple.com/ua/app-store/{self.name.replace(" ", "_")}'

    def __eq__(self, other):
        print(f'Compare by release date \n{self.name} < {other.name}')
        return self.release_date == other.release_date

    def __gt__(self, other):
        print(f'Compare by release date \n{self.name} < {other.name}')
        return self.release_date > other.release_date

    def __lt__(self, other):
        print(f'Compare by release date \n{self.name} < {other.name}')
        return self.release_date < other.release_date


class DesktopApplication(Application, JSONSerializable):
    # TODO: зробити дескріптіон через гетер і сетер, в сетері зробити перевірку

    _description = ''

    @property
    def description(self):
        return self._description

    @description.setter
    def description(self, value):
        if len(value) > 250:
            # return print('Max value must be < 250')
            raise ValueError('Max length must not contain more that 250 symbols')
        self._description = value

    def short_description(self):
        if len(self._description) > 50:
            return self._description[0:10]
        return self._description

    list_of_platforms = ['windows', 'linux', 'macos']

    @property
    def list_of_available_platforms(self):
        print("Getter")
        return self.list_of_platforms

    @list_of_available_platforms.setter
    def list_of_available_platforms(self, value):
        print("Setter")
        self.list_of_platforms = value


a = AndroidApplication('Dota', '2007-7-14', 3.0)
#
# print(a)
# print(repr(a))
# print(a.get_absolute_url())
#
b = AndroidApplication('Clash of Clans', '2008-8-15', 2.0)
# print(b)
# print(repr(b))
# print(b.get_absolute_url())
#
# print(a == b)
# print(a > b)
# print(a < b)
#
# # print(a.list_of_compatible_versions)
#
# c = IOSApplication('CS:GO', '2012-08-20', 1.1)
# print(c)
# print(repr(c))
#
# d = IOSApplication('Minecraft', '2008-10-10', 1.14)
# print(d)
# print(repr(d))
#
# print(c == d)
# print(c < d)
# print(c > d)
#
# p = DesktopApplication('1', '1', 2.2)
# print(p.list_of_available_platforms)
# # p.description = "123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 21312 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213123 213 213"
# # print(p.description)
# p.description = '123'
# print(p.description)
# p.description = '12345678901234567890123456789012341234567890123456789012345678901234'
# print(p.short_description())
#
# # print(a.to_json())
# # print(b.to_json())
# print(c.to_json())
# print(p.to_json())